{{ 'component-produktdetails-faqs.css' | asset_url | stylesheet_tag }}

<div class="color-{{ section.settings.color_scheme }} gradient">
  <div class="section-{{ section.id }}-padding">
    <div class="produktdetails-faqs-container">
      <!-- Left Side: Produktdetails -->
      <div class="produktdetails-section">
        <div class="produktdetails-card">
          <img src="{{ 'bg-gold.png' | asset_url }}" alt="Produktdetails Icon" width="50" height="50" loading="lazy">
          <h2>PRODUKTINFOMATION</h2>
          <div class="produktdetails-content">
            {% if product.metafields.custom.product_layout_product_detail.value %}
              {% assign details = product.metafields.custom.product_layout_product_detail.value %}
              <div class="detail-list">
                {% for item in details %}
                  <p class="detail-item">{{ item }}</p>
                {% endfor %}
              </div>
            {% else %}
              <div class="detail-list">
                <p class="detail-item">Deutsche Pharmazentralnummer (PZN): 19638018</p>
                <p class="detail-item">Vertrieb: Dr. Frei Wellness</p>
                <p class="detail-item">Herstellung: Eigene Herstellung in Europa</p>
              </div>
            {% endif %}
          </div>
        </div>
      </div>

      <!-- Right Side: FAQs Slider -->
      <div class="faqs-section">
        <div class="faqs-slider">
          <div class="faq-slide active">
            <div class="faq-content">
              <h3>{{ section.settings.faq_title_1 }}</h3>
              <p>{{ section.settings.faq_content_1 }}</p>
              <div class="faq-dots">
                <span class="dot active" data-slide="0"></span>
                <span class="dot" data-slide="1"></span>
                <span class="dot" data-slide="2"></span>
                <span class="dot" data-slide="3"></span>
              </div>
            </div>
            <div class="faq-image">
              {% if section.settings.faq_image_1 %}
                <img
                  src="{{ section.settings.faq_image_1 | image_url: width: 300 }}"
                  alt="{{ section.settings.faq_title_1 }}"
                  width="300"
                  height="200"
                  loading="lazy"
                >
              {% else %}
                <div class="faq-placeholder">
                  <svg width="300" height="200" viewBox="0 0 300 200" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect width="300" height="200" fill="#E5E7EB"/>
                    <text x="150" y="100" text-anchor="middle" fill="#9CA3AF" font-family="Arial" font-size="14">FAQ Image</text>
                  </svg>
                </div>
              {% endif %}
            </div>
          </div>

          <div class="faq-slide">
            <div class="faq-content">
              <h3>{{ section.settings.faq_title_2 }}</h3>
              <p>{{ section.settings.faq_content_2 }}</p>
              <div class="faq-dots">
                <span class="dot" data-slide="0"></span>
                <span class="dot active" data-slide="1"></span>
                <span class="dot" data-slide="2"></span>
                <span class="dot" data-slide="3"></span>
              </div>
            </div>
            <div class="faq-image">
              {% if section.settings.faq_image_2 %}
                <img
                  src="{{ section.settings.faq_image_2 | image_url: width: 300 }}"
                  alt="{{ section.settings.faq_title_2 }}"
                  width="300"
                  height="200"
                  loading="lazy"
                >
              {% else %}
                <div class="faq-placeholder">
                  <svg width="300" height="200" viewBox="0 0 300 200" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect width="300" height="200" fill="#E5E7EB"/>
                    <text x="150" y="100" text-anchor="middle" fill="#9CA3AF" font-family="Arial" font-size="14">FAQ Image</text>
                  </svg>
                </div>
              {% endif %}
            </div>
          </div>

          <div class="faq-slide">
            <div class="faq-content">
              <h3>{{ section.settings.faq_title_3 }}</h3>
              <p>{{ section.settings.faq_content_3 }}</p>
              <div class="faq-dots">
                <span class="dot" data-slide="0"></span>
                <span class="dot" data-slide="1"></span>
                <span class="dot active" data-slide="2"></span>
                <span class="dot" data-slide="3"></span>
              </div>
            </div>
            <div class="faq-image">
              {% if section.settings.faq_image_3 %}
                <img
                  src="{{ section.settings.faq_image_3 | image_url: width: 300 }}"
                  alt="{{ section.settings.faq_title_3 }}"
                  width="300"
                  height="200"
                  loading="lazy"
                >
              {% else %}
                <div class="faq-placeholder">
                  <svg width="300" height="200" viewBox="0 0 300 200" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect width="300" height="200" fill="#E5E7EB"/>
                    <text x="150" y="100" text-anchor="middle" fill="#9CA3AF" font-family="Arial" font-size="14">FAQ Image</text>
                  </svg>
                </div>
              {% endif %}
            </div>
          </div>

          <div class="faq-slide">
            <div class="faq-content">
              <h3>{{ section.settings.faq_title_4 }}</h3>
              <p>{{ section.settings.faq_content_4 }}</p>
              <div class="faq-dots">
                <span class="dot" data-slide="0"></span>
                <span class="dot" data-slide="1"></span>
                <span class="dot" data-slide="2"></span>
                <span class="dot active" data-slide="3"></span>
              </div>
            </div>
            <div class="faq-image">
              {% if section.settings.faq_image_4 %}
                <img
                  src="{{ section.settings.faq_image_4 | image_url: width: 300 }}"
                  alt="{{ section.settings.faq_title_4 }}"
                  width="300"
                  height="200"
                  loading="lazy"
                >
              {% else %}
                <div class="faq-placeholder">
                  <svg width="300" height="200" viewBox="0 0 300 200" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect width="300" height="200" fill="#E5E7EB"/>
                    <text x="150" y="100" text-anchor="middle" fill="#9CA3AF" font-family="Arial" font-size="14">FAQ Image</text>
                  </svg>
                </div>
              {% endif %}
            </div>
          </div>

          <div class="faq-header">
            <h2>FAQs</h2>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const container = document.querySelector('.produktdetails-faqs-container');
    if (!container) return;

    const slides = container.querySelectorAll('.faq-slide');
    const dots = container.querySelectorAll('.dot');

    if (slides.length === 0) return;

    let currentSlide = 0;
    let autoPlayInterval;
    let isMobile = window.innerWidth <= 768;

    function showSlide(index) {
      if (isMobile) return; // Disable slider on mobile

      slides.forEach((slide, i) => {
        slide.classList.toggle('active', i === index);
      });

      dots.forEach((dot, i) => {
        dot.classList.toggle('active', i === index);
      });

      currentSlide = index;
    }

    function startAutoPlay() {
      if (isMobile) return; // Disable autoplay on mobile

      autoPlayInterval = setInterval(() => {
        currentSlide = (currentSlide + 1) % slides.length;
        showSlide(currentSlide);
      }, 5000);
    }

    function stopAutoPlay() {
      if (autoPlayInterval) {
        clearInterval(autoPlayInterval);
      }
    }

    function handleResize() {
      const wasMobile = isMobile;
      isMobile = window.innerWidth <= 768;

      if (isMobile && !wasMobile) {
        // Switched to mobile
        stopAutoPlay();
        slides.forEach((slide) => slide.classList.add('active'));
      } else if (!isMobile && wasMobile) {
        // Switched to desktop
        slides.forEach((slide, i) => slide.classList.toggle('active', i === currentSlide));
        startAutoPlay();
      }
    }

    // Dot click events (only on desktop)
    dots.forEach((dot, index) => {
      dot.addEventListener('click', () => {
        if (isMobile) return;
        showSlide(index);
        stopAutoPlay();
        startAutoPlay();
      });
    });

    // Initialize
    if (isMobile) {
      slides.forEach((slide) => slide.classList.add('active'));
    } else {
      showSlide(0);
      startAutoPlay();
    }

    // Pause on hover (desktop only)
    const slider = container.querySelector('.faqs-slider');
    if (slider) {
      slider.addEventListener('mouseenter', () => {
        if (!isMobile) stopAutoPlay();
      });
      slider.addEventListener('mouseleave', () => {
        if (!isMobile) startAutoPlay();
      });
    }

    // Handle window resize
    window.addEventListener('resize', handleResize);
  });
</script>

<style>
      .section-{{ section.id }}-padding {
        padding-top: {{ section.settings.padding_top }}px;
        padding-bottom: {{ section.settings.padding_bottom }}px;
      }

      .produktdetails-faqs-container {
        display: flex;
        gap: 2rem;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
      }

      .produktdetails-section {
        flex: 1;
      }

  .produktdetails-card {
      background: linear-gradient(135deg, #07478A 0%, #1e40af 100%);
      border-radius: 20px;
      padding: 6rem;
      color: white;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      position: relative;
      min-height: fit-content;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
  }

  .produktdetails-card>img {
      position: absolute;
      top: 52%;
      left: 0;
      width: 100%;
      height: 90%;
      border-radius: 20px;
      z-index: 0;
      transform: translateY(-50%);
  }

    .produktdetails-card h2 {
        color: #1e3fad;
        font-size: 1.2rem;
        font-weight: 600;
        margin-bottom: 1.5rem;
        text-align: center;
        letter-spacing: 1px;
        margin-top: 0;
        position: relative;
        z-index: 1;
    }

    .produktdetails-content {
        position: relative;
        z-index: 1;
    }

      .detail-list {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

    .detail-item {
        padding: 0.75rem 1rem;
        font-size: 1.2rem;
        line-height: 1.4;
        margin: 0;
        color: #1e3fac;
        text-align: center;
        border-bottom: 1px solid;
    }

      .faqs-section {
        flex: 1;
        position: relative;
      }

      .faqs-slider {
        position: relative;
        background: linear-gradient(135deg, #07478A 0%, #1e40af 100%);
        border-radius: 20px;
        overflow: hidden;
        height: 400px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      }

      .faq-header {
        position: absolute;
        top: 1rem;
        right: 1.5rem;
        z-index: 10;
      }

      .faq-header h2 {
        color: white;
        font-size: 1.2rem;
        font-weight: 600;
        letter-spacing: 1px;
        margin: 0;
      }

      .faq-slide {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        opacity: 0;
        transition: opacity 0.5s ease-in-out;
        padding: 2rem;
      }

      .faq-slide.active {
        opacity: 1;
      }

      .faq-content {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
        padding-right: 1rem;
        color: white;
      }

      .faq-content h3 {
        font-size: 1.1rem;
        margin-bottom: 1rem;
        font-weight: 600;
        line-height: 1.3;
        margin-top: 0;
        color: white;
      }

      .faq-content p {
        font-size: 0.9rem;
        line-height: 1.5;
        margin-bottom: 2rem;
        opacity: 0.9;
        margin-top: 0;
        color: white;
      }

      .faq-dots {
        display: flex;
        gap: 0.5rem;
      }

      .dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: rgba(255,255,255,0.3);
        cursor: pointer;
        transition: background 0.3s ease;
      }

      .dot.active {
        background: #d4af37;
      }

      .dot:hover {
        background: rgba(212, 175, 55, 0.7);
      }

      .faq-image {
        flex: 0 0 180px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .faq-image img {
        width: 100%;
        height: auto;
        max-height: 150px;
        object-fit: cover;
        border-radius: 10px;
      }

      .faq-placeholder {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 150px;
      }

      .faq-placeholder svg {
        background: rgba(255,255,255,0.1);
        border-radius: 10px;
      }

      @media (max-width: 768px) {
        .produktdetails-faqs-container {
          flex-direction: column;
          gap: 1.5rem;
        }

        .faqs-slider {
          height: auto;
          background: transparent;
          box-shadow: none;
          overflow: visible;
        }

        .faq-slide {
          position: static;
          opacity: 1 !important;
          height: auto;
          margin-bottom: 1.5rem;
          background: linear-gradient(135deg, #07478A 0%, #1e40af 100%);
          border-radius: 15px;
          box-shadow: 0 5px 15px rgba(0,0,0,0.1);
          padding: 1.5rem;
          flex-direction: row;
        }

        .faq-content {
          flex: 2;
          padding-right: 1rem;
          margin-bottom: 0;
        }

        .faq-image {
          flex: 1;
          max-width: 33.33%;
        }

        .faq-image img {
          max-height: 120px;
          width: 100%;
          object-fit: cover;
        }

        .faq-placeholder {
          height: 120px;
          width: 100%;
        }

        .faq-header {
          position: static;
          text-align: center;
          margin-bottom: 1.5rem;
        }

        .faq-header h2 {
          color: #07478A;
          font-size: 1.5rem;
        }

        .produktdetails-card {
          background: transparent;
          box-shadow: none;
        }
      }
</style>

{% schema %}
{
  "name": "Product Details & FAQs",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "faq_title_1",
      "label": "FAQ 1 Title",
      "default": "Sản phẩm này có sẵn không?"
    },
    {
      "type": "textarea",
      "id": "faq_content_1",
      "label": "FAQ 1 Content",
      "default": "Các sản phẩm của chúng tôi luôn có sẵn hàng với số lượng lớn. Nếu bạn có nhu cầu mua số lượng lớn hoặc mong muốn trở thành CTV bán hàng của chúng tôi, xin vui lòng liên hệ theo số hotline 0823.289.898 để được hỗ trợ."
    },
    {
      "type": "image_picker",
      "id": "faq_image_1",
      "label": "FAQ 1 Image"
    },
    {
      "type": "text",
      "id": "faq_title_2",
      "label": "FAQ 2 Title",
      "default": "Làm thế nào để sử dụng sản phẩm?"
    },
    {
      "type": "textarea",
      "id": "faq_content_2",
      "label": "FAQ 2 Content",
      "default": "Hướng dẫn sử dụng chi tiết được in trên bao bì sản phẩm. Bạn cũng có thể tham khảo hướng dẫn trên website hoặc liên hệ với chúng tôi để được tư vấn cụ thể."
    },
    {
      "type": "image_picker",
      "id": "faq_image_2",
      "label": "FAQ 2 Image"
    },
    {
      "type": "text",
      "id": "faq_title_3",
      "label": "FAQ 3 Title",
      "default": "Sản phẩm có tác dụng phụ không?"
    },
    {
      "type": "textarea",
      "id": "faq_content_3",
      "label": "FAQ 3 Content",
      "default": "Sản phẩm được nghiên cứu và kiểm nghiệm kỹ lưỡng, an toàn cho sức khỏe. Tuy nhiên, nếu bạn có tiền sử bệnh lý hoặc đang dùng thuốc điều trị, vui lòng tham khảo ý kiến bác sĩ trước khi sử dụng."
    },
    {
      "type": "image_picker",
      "id": "faq_image_3",
      "label": "FAQ 3 Image"
    },
    {
      "type": "text",
      "id": "faq_title_4",
      "label": "FAQ 4 Title",
      "default": "Chính sách đổi trả như thế nào?"
    },
    {
      "type": "textarea",
      "id": "faq_content_4",
      "label": "FAQ 4 Content",
      "default": "Chúng tôi hỗ trợ đổi trả trong vòng 30 ngày kể từ ngày mua hàng với điều kiện sản phẩm còn nguyên seal, chưa sử dụng. Chi tiết vui lòng xem thêm tại trang Chính sách đổi trả."
    },
    {
      "type": "image_picker",
      "id": "faq_image_4",
      "label": "FAQ 4 Image"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Top padding",
      "default": 48
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding",
      "default": 0
    }
  ],
  "presets": [
    {
      "name": "Product Details & FAQs"
    }
  ]
}
{% endschema %}
